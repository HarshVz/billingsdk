{
  "$schema": "https://ui.shadcn.com/schema/registry-item.json",
  "name": "update-plan-dialog",
  "type": "registry:block",
  "title": "Update Plan Dialog",
  "description": "A update plan dialog component",
  "dependencies": [
    "lucide-react",
    "motion"
  ],
  "registryDependencies": [
    "button",
    "badge",
    "radio-group",
    "toggle",
    "label",
    "dialog",
    "utils"
  ],
  "files": [
    {
      "path": "src/registry/billingsdk/update-plan-dialog.tsx",
      "content": "\"use client\";\r\n\r\nimport { motion, AnimatePresence } from \"motion/react\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { Badge } from \"@/components/ui/badge\";\r\nimport { RadioGroup, RadioGroupItem } from \"@/components/ui/radio-group\";\r\nimport { Toggle } from \"@/components/ui/toggle\";\r\nimport { Label } from \"@/components/ui/label\";\r\nimport { type Plan } from \"@/lib/billingsdk-config\";\r\nimport { cn } from \"@/lib/utils\";\r\nimport {\r\n  Dialog,\r\n  DialogContent,\r\n  DialogHeader,\r\n  DialogTitle,\r\n  DialogTrigger,\r\n} from \"@/components/ui/dialog\";\r\nimport { useState, useCallback } from \"react\";\r\nimport { useTheme } from \"@/contexts/theme-context\";\r\nimport { getThemeStyles } from \"@/lib/themes\";\r\n\r\nexport interface UpdatePlanDialogProps {\r\n  currentPlan: Plan;\r\n  plans: Plan[];\r\n  triggerText: string;\r\n  onPlanChange: (planId: string) => void;\r\n  className?: string;\r\n  title?: string;\r\n}\r\n\r\nconst easing = [0.4, 0, 0.2, 1] as const;\r\n\r\nexport function UpdatePlanDialog({\r\n  currentPlan,\r\n  plans,\r\n  onPlanChange,\r\n  className,\r\n  title,\r\n  triggerText,\r\n}: UpdatePlanDialogProps) {\r\n  const [isYearly, setIsYearly] = useState(false);\r\n  const [selectedPlan, setSelectedPlan] = useState<string | undefined>(\r\n    undefined,\r\n  );\r\n  const [isOpen, setIsOpen] = useState(false);\r\n  const { currentTheme, previewDarkMode } = useTheme();\r\n  const themeStyles = getThemeStyles(currentTheme, previewDarkMode);\r\n\r\n  const getCurrentPrice = useCallback(\r\n    (plan: Plan) => (isYearly ? `${plan.yearlyPrice}` : `${plan.monthlyPrice}`),\r\n    [isYearly],\r\n  );\r\n\r\n  const handlePlanChange = useCallback((planId: string) => {\r\n    setSelectedPlan((prev) => (prev === planId ? undefined : planId));\r\n  }, []);\r\n\r\n  const handleOpenChange = useCallback((open: boolean) => {\r\n    setIsOpen(open);\r\n    if (!open) {\r\n      setSelectedPlan(undefined);\r\n    }\r\n  }, []);\r\n\r\n  return (\r\n    <Dialog open={isOpen} onOpenChange={handleOpenChange}>\r\n      <DialogTrigger asChild>\r\n        <Button>{triggerText || \"Update Plan\"}</Button>\r\n      </DialogTrigger>\r\n      <DialogContent\r\n        className={cn(\r\n          \"text-foreground flex max-h-[95vh] flex-col gap-3 sm:max-h-[90vh] sm:gap-4\",\r\n          \"w-[calc(100vw-2rem)] max-w-2xl sm:w-full\",\r\n          \"p-4 sm:p-6\",\r\n          className,\r\n        )}\r\n        style={themeStyles}\r\n      >\r\n        <DialogHeader className=\"flex flex-col gap-3 pb-2 sm:flex-row sm:items-center sm:justify-between sm:gap-4 sm:pb-0\">\r\n          <DialogTitle className=\"text-lg font-semibold sm:text-xl\">\r\n            {title || \"Upgrade Plan\"}\r\n          </DialogTitle>\r\n          <div className=\"flex items-center gap-1.5 text-sm sm:gap-2\">\r\n            <Toggle\r\n              size=\"sm\"\r\n              pressed={!isYearly}\r\n              onPressedChange={(pressed) => setIsYearly(!pressed)}\r\n              className=\"h-9 px-3 text-xs sm:h-10 sm:px-4 sm:text-sm\"\r\n            >\r\n              Monthly\r\n            </Toggle>\r\n            <Toggle\r\n              size=\"sm\"\r\n              pressed={isYearly}\r\n              onPressedChange={(pressed) => setIsYearly(pressed)}\r\n              className=\"h-9 px-3 text-xs sm:h-10 sm:px-4 sm:text-sm\"\r\n            >\r\n              Yearly\r\n            </Toggle>\r\n          </div>\r\n        </DialogHeader>\r\n        <div\r\n          className=\"[&::-webkit-scrollbar-thumb]:bg-muted hover:[&::-webkit-scrollbar-thumb]:bg-muted-foreground/20 -mx-4 min-h-0 flex-1 overflow-x-hidden overflow-y-auto px-4 sm:-mx-6 sm:px-6 [&::-webkit-scrollbar]:w-2 [&::-webkit-scrollbar-thumb]:rounded-full [&::-webkit-scrollbar-thumb]:border-2 [&::-webkit-scrollbar-thumb]:border-transparent [&::-webkit-scrollbar-track]:bg-transparent\"\r\n          style={{\r\n            scrollbarWidth: \"thin\",\r\n            scrollbarColor: \"hsl(var(--muted)) transparent\",\r\n          }}\r\n        >\r\n          {plans.length === 0 ? (\r\n            <div className=\"flex items-center justify-center py-12 text-center\">\r\n              <p className=\"text-muted-foreground text-sm\">\r\n                No plans available\r\n              </p>\r\n            </div>\r\n          ) : (\r\n            <RadioGroup value={selectedPlan} onValueChange={handlePlanChange}>\r\n              <div className=\"space-y-2.5 pr-0.5 pb-2 sm:space-y-3\">\r\n                {plans.map((plan, index) => (\r\n                  <motion.div\r\n                    key={plan.id}\r\n                    layout\r\n                    initial={{ opacity: 0, y: 20 }}\r\n                    animate={{ opacity: 1, y: 0 }}\r\n                    transition={{\r\n                      layout: { duration: 0.3, ease: easing },\r\n                      opacity: {\r\n                        delay: index * 0.05,\r\n                        duration: 0.3,\r\n                        ease: easing,\r\n                      },\r\n                      y: { delay: index * 0.05, duration: 0.3, ease: easing },\r\n                    }}\r\n                    onClick={() => handlePlanChange(plan.id)}\r\n                    onKeyDown={(e) => {\r\n                      if (e.key === \"Enter\" || e.key === \" \") {\r\n                        e.preventDefault();\r\n                        handlePlanChange(plan.id);\r\n                      }\r\n                    }}\r\n                    role=\"button\"\r\n                    tabIndex={0}\r\n                    aria-pressed={selectedPlan === plan.id}\r\n                    className={cn(\r\n                      \"relative cursor-pointer overflow-hidden rounded-lg border transition-all duration-200 sm:rounded-xl\",\r\n                      \"focus-visible:ring-primary touch-manipulation focus-visible:ring-2 focus-visible:ring-offset-2 focus-visible:outline-none\",\r\n                      selectedPlan === plan.id\r\n                        ? \"border-primary from-muted/60 to-muted/30 bg-gradient-to-br shadow-sm\"\r\n                        : \"border-border hover:border-primary/50\",\r\n                    )}\r\n                  >\r\n                    <motion.div layout=\"position\" className=\"p-3 sm:p-4\">\r\n                      <div className=\"flex items-start justify-between gap-2 sm:gap-3\">\r\n                        <div className=\"flex min-w-0 flex-1 gap-2 sm:gap-3\">\r\n                          <RadioGroupItem\r\n                            value={plan.id}\r\n                            id={plan.id}\r\n                            className=\"pointer-events-none mt-0.5 flex-shrink-0 sm:mt-1\"\r\n                          />\r\n                          <div className=\"min-w-0 flex-1\">\r\n                            <div className=\"flex flex-wrap items-center gap-1.5 sm:gap-2\">\r\n                              <Label\r\n                                htmlFor={plan.id}\r\n                                className=\"cursor-pointer text-sm leading-tight font-semibold sm:text-base sm:font-medium\"\r\n                              >\r\n                                {plan.title}\r\n                              </Label>\r\n                              {plan.badge && (\r\n                                <Badge\r\n                                  variant=\"secondary\"\r\n                                  className=\"h-5 flex-shrink-0 px-1.5 py-0 text-[10px] sm:h-auto sm:px-2 sm:py-0.5 sm:text-xs\"\r\n                                >\r\n                                  {plan.badge}\r\n                                </Badge>\r\n                              )}\r\n                            </div>\r\n                            <p className=\"text-muted-foreground mt-1 text-[11px] leading-relaxed sm:text-xs\">\r\n                              {plan.description}\r\n                            </p>\r\n                            {plan.features.length > 0 && (\r\n                              <div className=\"pt-2 sm:pt-3\">\r\n                                <div className=\"flex flex-wrap gap-1.5 sm:gap-2\">\r\n                                  {plan.features.map(\r\n                                    (feature, featureIndex) => (\r\n                                      <div\r\n                                        key={featureIndex}\r\n                                        className=\"bg-muted/20 border-border/30 flex flex-shrink-0 items-center gap-1.5 rounded-md border px-2 py-1 sm:gap-2 sm:rounded-lg\"\r\n                                      >\r\n                                        <div className=\"bg-primary h-1 w-1 flex-shrink-0 rounded-full sm:h-1.5 sm:w-1.5\" />\r\n                                        <span className=\"text-muted-foreground text-[10px] leading-none whitespace-nowrap sm:text-xs\">\r\n                                          {feature.name}\r\n                                        </span>\r\n                                      </div>\r\n                                    ),\r\n                                  )}\r\n                                </div>\r\n                              </div>\r\n                            )}\r\n                          </div>\r\n                        </div>\r\n                        <div className=\"min-w-[60px] flex-shrink-0 text-right sm:min-w-[80px]\">\r\n                          <div className=\"text-base leading-tight font-bold sm:text-xl sm:font-semibold\">\r\n                            {parseFloat(getCurrentPrice(plan)) >= 0\r\n                              ? `${plan.currency}${getCurrentPrice(plan)}`\r\n                              : getCurrentPrice(plan)}\r\n                          </div>\r\n                          <div className=\"text-muted-foreground mt-0.5 text-[10px] sm:text-xs\">\r\n                            /{isYearly ? \"year\" : \"month\"}\r\n                          </div>\r\n                        </div>\r\n                      </div>\r\n                    </motion.div>\r\n\r\n                    <AnimatePresence initial={false}>\r\n                      {selectedPlan === plan.id && (\r\n                        <motion.div\r\n                          initial={{ height: 0, opacity: 0 }}\r\n                          animate={{\r\n                            height: \"auto\",\r\n                            opacity: 1,\r\n                            transition: {\r\n                              height: { duration: 0.3, ease: easing },\r\n                              opacity: {\r\n                                duration: 0.25,\r\n                                delay: 0.05,\r\n                                ease: easing,\r\n                              },\r\n                            },\r\n                          }}\r\n                          exit={{\r\n                            height: 0,\r\n                            opacity: 0,\r\n                            transition: {\r\n                              height: { duration: 0.25, ease: easing },\r\n                              opacity: { duration: 0.15, ease: easing },\r\n                            },\r\n                          }}\r\n                          className=\"overflow-hidden\"\r\n                        >\r\n                          <motion.div\r\n                            initial={{ y: -8 }}\r\n                            animate={{\r\n                              y: 0,\r\n                              transition: {\r\n                                duration: 0.25,\r\n                                delay: 0.05,\r\n                                ease: easing,\r\n                              },\r\n                            }}\r\n                            exit={{ y: -8 }}\r\n                            className=\"px-3 pb-3 sm:px-4 sm:pb-4\"\r\n                          >\r\n                            <Button\r\n                              className=\"h-10 w-full touch-manipulation text-sm font-medium sm:h-11 sm:text-base\"\r\n                              disabled={selectedPlan === currentPlan.id}\r\n                              onClick={(e) => {\r\n                                e.stopPropagation();\r\n                                onPlanChange(plan.id);\r\n                                handleOpenChange(false);\r\n                              }}\r\n                            >\r\n                              {selectedPlan === currentPlan.id\r\n                                ? \"Current Plan\"\r\n                                : \"Upgrade\"}\r\n                            </Button>\r\n                          </motion.div>\r\n                        </motion.div>\r\n                      )}\r\n                    </AnimatePresence>\r\n                  </motion.div>\r\n                ))}\r\n              </div>\r\n            </RadioGroup>\r\n          )}\r\n        </div>\r\n      </DialogContent>\r\n    </Dialog>\r\n  );\r\n}\r\n",
      "type": "registry:component",
      "target": "components/billingsdk/update-plan-dialog.tsx"
    },
    {
      "path": "src/registry/billingsdk/demo/update-plan-dialog-demo.tsx",
      "content": "\"use client\";\r\n\r\nimport { UpdatePlanDialog } from \"@/components/billingsdk/update-plan-dialog\";\r\nimport { plans } from \"@/lib/billingsdk-config\";\r\n\r\nexport function UpdatePlanDialogDemo() {\r\n  return (\r\n    <div className=\"mx-auto flex min-h-[300px] flex-1 flex-col justify-center p-4 text-center\">\r\n      <UpdatePlanDialog\r\n        currentPlan={plans[1]}\r\n        plans={plans}\r\n        onPlanChange={(planId) => {\r\n          console.log(planId);\r\n        }}\r\n        triggerText=\"Update Plan\"\r\n      />\r\n    </div>\r\n  );\r\n}\r\n",
      "type": "registry:component",
      "target": "components/update-plan-dialog-demo.tsx"
    },
    {
      "path": "src/registry/lib/billingsdk-config.ts",
      "content": "export interface Plan {\r\n  id: string;\r\n  title: string;\r\n  description: string;\r\n  highlight?: boolean;\r\n  type?: \"monthly\" | \"yearly\";\r\n  currency?: string;\r\n  monthlyPrice: string;\r\n  yearlyPrice: string;\r\n  buttonText: string;\r\n  badge?: string;\r\n  features: {\r\n    name: string;\r\n    icon: string;\r\n    iconColor?: string;\r\n  }[];\r\n}\r\n\r\nexport interface CurrentPlan {\r\n  plan: Plan;\r\n  type: \"monthly\" | \"yearly\" | \"custom\";\r\n  price?: string;\r\n  nextBillingDate: string;\r\n  paymentMethod: string;\r\n  status: \"active\" | \"inactive\" | \"past_due\" | \"cancelled\";\r\n}\r\n\r\nexport const plans: Plan[] = [\r\n  {\r\n    id: \"starter\",\r\n    title: \"Starter\",\r\n    description: \"For developers testing out Liveblocks locally.\",\r\n    currency: \"$\",\r\n    monthlyPrice: \"0\",\r\n    yearlyPrice: \"0\",\r\n    buttonText: \"Start today for free\",\r\n    features: [\r\n      {\r\n        name: \"Presence\",\r\n        icon: \"check\",\r\n        iconColor: \"text-green-500\",\r\n      },\r\n      {\r\n        name: \"Comments\",\r\n        icon: \"check\",\r\n        iconColor: \"text-orange-500\",\r\n      },\r\n      {\r\n        name: \"Notifications\",\r\n        icon: \"check\",\r\n        iconColor: \"text-teal-500\",\r\n      },\r\n      {\r\n        name: \"Text Editor\",\r\n        icon: \"check\",\r\n        iconColor: \"text-blue-500\",\r\n      },\r\n      {\r\n        name: \"Sync Datastore\",\r\n        icon: \"check\",\r\n        iconColor: \"text-zinc-500\",\r\n      },\r\n    ],\r\n  },\r\n  {\r\n    id: \"pro\",\r\n    title: \"Pro\",\r\n    description: \"For companies adding collaboration in production.\",\r\n    currency: \"$\",\r\n    monthlyPrice: \"20\",\r\n    yearlyPrice: \"199\",\r\n    buttonText: \"Sign up\",\r\n    badge: \"Most popular\",\r\n    highlight: true,\r\n    features: [\r\n      {\r\n        name: \"Presence\",\r\n        icon: \"check\",\r\n        iconColor: \"text-green-500\",\r\n      },\r\n      {\r\n        name: \"Comments\",\r\n        icon: \"check\",\r\n        iconColor: \"text-orange-500\",\r\n      },\r\n      {\r\n        name: \"Notifications\",\r\n        icon: \"check\",\r\n        iconColor: \"text-teal-500\",\r\n      },\r\n      {\r\n        name: \"Text Editor\",\r\n        icon: \"check\",\r\n        iconColor: \"text-blue-500\",\r\n      },\r\n      {\r\n        name: \"Sync Datastore\",\r\n        icon: \"check\",\r\n        iconColor: \"text-zinc-500\",\r\n      },\r\n    ],\r\n  },\r\n  {\r\n    id: \"enterprise\",\r\n    title: \"Enterprise\",\r\n    description:\r\n      \"For organizations that need more support and compliance features.\",\r\n    currency: \"$\",\r\n    monthlyPrice: \"Custom\",\r\n    yearlyPrice: \"Custom\",\r\n    buttonText: \"Contact sales\",\r\n    features: [\r\n      {\r\n        name: \"Presence\",\r\n        icon: \"check\",\r\n        iconColor: \"text-green-500\",\r\n      },\r\n      {\r\n        name: \"Comments\",\r\n        icon: \"check\",\r\n        iconColor: \"text-orange-500\",\r\n      },\r\n      {\r\n        name: \"Notifications\",\r\n        icon: \"check\",\r\n        iconColor: \"text-teal-500\",\r\n      },\r\n      {\r\n        name: \"Text Editor\",\r\n        icon: \"check\",\r\n        iconColor: \"text-blue-500\",\r\n      },\r\n      {\r\n        name: \"Sync Datastore\",\r\n        icon: \"check\",\r\n        iconColor: \"text-zinc-500\",\r\n      },\r\n    ],\r\n  },\r\n];\r\n",
      "type": "registry:lib",
      "target": "lib/billingsdk-config.ts"
    }
  ]
}