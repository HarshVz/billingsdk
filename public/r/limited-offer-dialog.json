{
  "$schema": "https://ui.shadcn.com/schema/registry-item.json",
  "name": "limited-offer-dialog",
  "type": "registry:block",
  "title": "Limited Offer Dialog",
  "description": "A dialog component for displaying limited-time offers with customizable content and actions",
  "dependencies": [
    "lucide-react"
  ],
  "registryDependencies": [
    "dialog",
    "button",
    "badge",
    "button",
    "card",
    "utils"
  ],
  "files": [
    {
      "path": "src/registry/billingsdk/limited-offer-dialog.tsx",
      "content": "\"use client\";\r\n\r\nimport * as React from \"react\";\r\nimport {\r\n  Dialog,\r\n  DialogContent,\r\n  DialogTrigger,\r\n  DialogTitle,\r\n} from \"@/components/ui/dialog\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { Badge } from \"@/components/ui/badge\";\r\nimport { Circle } from \"lucide-react\";\r\nimport { cn } from \"@/lib/utils\";\r\nimport { useTheme } from \"@/contexts/theme-context\";\r\nimport { getThemeStyles } from \"@/lib/themes\";\r\n\r\n// Plan interface for type safety\r\nexport interface Offer {\r\n  id: string;\r\n  title: string;\r\n  description: string;\r\n  discount: string;\r\n  features: Array<{ name: string; icon?: string; iconColor?: string }>;\r\n}\r\n\r\n// Component props interface\r\nexport interface LimitedOfferDialogProps {\r\n  title?: string;\r\n  description?: string;\r\n  offer?: Offer;\r\n  triggerButtonText?: string;\r\n  warningTitle?: string;\r\n  warningText?: string;\r\n  claimButtonText?: string;\r\n  declineButtonText?: string;\r\n  onClaimOffer?: (offerId: string) => Promise<void> | void;\r\n  onDeclineOffer?: (offerId: string) => Promise<void> | void;\r\n  onDialogClose?: () => void;\r\n  className?: string;\r\n}\r\n\r\n// Default offer object\r\nconst defaultOffer: Offer = {\r\n  id: \"limited-offer-dialog\",\r\n  title: \"Special Offer\",\r\n  description: \"Limited time deal\",\r\n  discount: \"50% OFF\",\r\n  features: [\r\n    { name: \"50% off your first month\" },\r\n    { name: \"Valid until December 31, 2024\" },\r\n    { name: \"First 100 users only\" },\r\n  ],\r\n};\r\n\r\nexport function LimitedOfferDialog({\r\n  title = \"ðŸ”¥ Limited Time Offer!\",\r\n  description = \"Grab this deal before it's gone\",\r\n  offer = defaultOffer,\r\n  triggerButtonText = \"Open Offer Dialog\",\r\n  warningTitle = \"Don't miss out!\",\r\n  warningText = \"This exclusive offer won't last long. Claim it now before it's gone forever.\",\r\n  claimButtonText = \"ðŸ‘‰ Claim Offer Now\",\r\n  declineButtonText = \"No thanks, I'll pay full price\",\r\n  onClaimOffer,\r\n  onDeclineOffer,\r\n  onDialogClose,\r\n  className,\r\n}: LimitedOfferDialogProps) {\r\n  // State management\r\n  const [isOpen, setIsOpen] = React.useState(false);\r\n  const [isLoading, setIsLoading] = React.useState(false);\r\n  const [error, setError] = React.useState<string | null>(null);\r\n\r\n  // Theme integration\r\n  const { currentTheme, previewDarkMode } = useTheme();\r\n  const themeStyles = getThemeStyles(currentTheme, previewDarkMode);\r\n\r\n  // Event handlers\r\n  const handleClaimOffer = async () => {\r\n    if (!onClaimOffer) {\r\n      console.log(\"Claim offer clicked\");\r\n      return;\r\n    }\r\n\r\n    setIsLoading(true);\r\n    setError(null);\r\n\r\n    try {\r\n      await onClaimOffer(offer.id);\r\n      setIsOpen(false);\r\n      onDialogClose?.();\r\n    } catch (err) {\r\n      setError(err instanceof Error ? err.message : \"Failed to claim offer\");\r\n    } finally {\r\n      setIsLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleDeclineOffer = async () => {\r\n    if (!onDeclineOffer) {\r\n      console.log(\"Decline offer clicked\");\r\n      setIsOpen(false);\r\n      onDialogClose?.();\r\n      return;\r\n    }\r\n\r\n    setIsLoading(true);\r\n    setError(null);\r\n\r\n    try {\r\n      await onDeclineOffer(offer.id);\r\n      setIsOpen(false);\r\n      onDialogClose?.();\r\n    } catch (err) {\r\n      setError(err instanceof Error ? err.message : \"Operation failed\");\r\n    } finally {\r\n      setIsLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleDialogClose = () => {\r\n    setIsOpen(false);\r\n    setError(null);\r\n    onDialogClose?.();\r\n  };\r\n\r\n  // Keyboard navigation (ESC key)\r\n  React.useEffect(() => {\r\n    const handleKeyDown = (event: KeyboardEvent) => {\r\n      if (event.key === \"Escape\" && isOpen) {\r\n        handleDialogClose();\r\n      }\r\n    };\r\n\r\n    document.addEventListener(\"keydown\", handleKeyDown);\r\n    return () => document.removeEventListener(\"keydown\", handleKeyDown);\r\n  }, [isOpen]);\r\n\r\n  return (\r\n    <Dialog\r\n      open={isOpen}\r\n      onOpenChange={(open) => {\r\n        if (open) {\r\n          setIsOpen(true);\r\n        } else {\r\n          handleDialogClose();\r\n        }\r\n      }}\r\n    >\r\n      <DialogTrigger asChild>\r\n        <Button variant=\"outline\" className={className}>\r\n          {triggerButtonText}\r\n        </Button>\r\n      </DialogTrigger>\r\n      <DialogContent\r\n        className={cn(\r\n          \"max-w-[calc(100vw-2rem)] gap-0 p-0 sm:max-w-lg\",\r\n          className,\r\n        )}\r\n        style={themeStyles}\r\n      >\r\n        <div className=\"space-y-6 p-6\">\r\n          {/* Dialog Title for accessibility */}\r\n          <DialogTitle className=\"sr-only\">\r\n            {title} - {description}\r\n          </DialogTitle>\r\n\r\n          {/* Header */}\r\n          <div className=\"space-y-2 text-center\">\r\n            <h2 className=\"text-foreground text-xl font-semibold\">{title}</h2>\r\n            <p className=\"text-muted-foreground text-sm\">{description}</p>\r\n          </div>\r\n\r\n          {/* Offer Card */}\r\n          <div className=\"bg-muted space-y-4 rounded-lg p-4\">\r\n            <div className=\"flex items-start justify-between\">\r\n              <div className=\"space-y-1\">\r\n                <h3 className=\"text-foreground font-semibold\">{offer.title}</h3>\r\n                <p className=\"text-muted-foreground text-xs\">\r\n                  {offer.description}\r\n                </p>\r\n              </div>\r\n              <Badge\r\n                variant=\"secondary\"\r\n                className=\"text-foreground font-semibold\"\r\n              >\r\n                {offer.discount}\r\n              </Badge>\r\n            </div>\r\n\r\n            <div className=\"space-y-3\">\r\n              {offer.features.map((feature, index) => (\r\n                <div key={index} className=\"flex items-center gap-3\">\r\n                  <Circle className=\"text-foreground h-2 w-2 fill-current\" />\r\n                  <span className=\"text-foreground text-sm\">\r\n                    {feature.name}\r\n                  </span>\r\n                </div>\r\n              ))}\r\n            </div>\r\n          </div>\r\n\r\n          {/* Warning Section */}\r\n          <div className=\"bg-destructive/10 border-destructive/20 space-y-2 rounded-lg border p-4\">\r\n            <h4 className=\"text-destructive font-medium\">{warningTitle}</h4>\r\n            <p className=\"text-destructive/80 text-sm\">{warningText}</p>\r\n          </div>\r\n\r\n          {/* Error Display */}\r\n          {error && (\r\n            <div className=\"bg-destructive/10 border-destructive/20 rounded-lg border p-3\">\r\n              <p className=\"text-destructive text-sm\">{error}</p>\r\n            </div>\r\n          )}\r\n\r\n          {/* Action Buttons */}\r\n          <div className=\"flex flex-col gap-3 pt-2 sm:flex-row\">\r\n            <Button\r\n              onClick={handleClaimOffer}\r\n              disabled={isLoading}\r\n              className=\"bg-foreground hover:bg-foreground/90 text-background flex-1\"\r\n            >\r\n              {isLoading ? \"Processing...\" : claimButtonText}\r\n            </Button>\r\n            <Button\r\n              onClick={handleDeclineOffer}\r\n              disabled={isLoading}\r\n              variant=\"outline\"\r\n              className=\"border-border text-foreground hover:bg-muted flex-1\"\r\n            >\r\n              {declineButtonText}\r\n            </Button>\r\n          </div>\r\n        </div>\r\n      </DialogContent>\r\n    </Dialog>\r\n  );\r\n}\r\n",
      "type": "registry:component",
      "target": "components/billingsdk/limited-offer-dialog.tsx"
    },
    {
      "path": "src/registry/billingsdk/demo/limited-offer-dialog-demo.tsx",
      "content": "\"use client\";\r\n\r\nimport { LimitedOfferDialog } from \"@/components/billingsdk/limited-offer-dialog\";\r\n\r\n// Sample offer data\r\nconst sampleOffer = {\r\n  id: \"limited-offer-dialog\",\r\n  title: \"Special Offer\",\r\n  description: \"Limited time deal\",\r\n  discount: \"50% OFF\",\r\n  features: [\r\n    { name: \"50% off your first month\" },\r\n    { name: \"Valid until December 31, 2024\" },\r\n    { name: \"First 100 users only\" },\r\n  ],\r\n};\r\n\r\nexport function LimitedOfferDialogDemo() {\r\n  const handleClaimOffer = async (offerId: string) => {\r\n    console.log(\"Claiming offer:\", offerId);\r\n    // Simulate API call\r\n    await new Promise((resolve) => setTimeout(resolve, 1000));\r\n    alert(\"Offer claimed successfully!\");\r\n  };\r\n\r\n  const handleDeclineOffer = async (offerId: string) => {\r\n    console.log(\"Declining offer:\", offerId);\r\n    // Simulate API call\r\n    await new Promise((resolve) => setTimeout(resolve, 500));\r\n    alert(\"Offer declined. You can always come back later!\");\r\n  };\r\n\r\n  const handleDialogClose = () => {\r\n    console.log(\"Dialog closed\");\r\n  };\r\n\r\n  return (\r\n    <div className=\"mx-auto flex min-h-[300px] flex-1 flex-col justify-center p-4 text-center\">\r\n      <LimitedOfferDialog\r\n        title=\"ðŸ”¥ Limited Time Offer!\"\r\n        description=\"Grab this deal before it's gone\"\r\n        offer={sampleOffer}\r\n        triggerButtonText=\"Open Offer Dialog\"\r\n        warningTitle=\"Don't miss out!\"\r\n        warningText=\"This exclusive offer won't last long. Claim it now before it's gone forever.\"\r\n        claimButtonText=\"ðŸ‘‰ Claim Offer Now\"\r\n        declineButtonText=\"No thanks, I'll pay full price\"\r\n        onClaimOffer={handleClaimOffer}\r\n        onDeclineOffer={handleDeclineOffer}\r\n        onDialogClose={handleDialogClose}\r\n        className=\"w-auto\"\r\n      />\r\n    </div>\r\n  );\r\n}\r\n",
      "type": "registry:component",
      "target": "components/limited-offer-dialog-demo.tsx"
    }
  ]
}