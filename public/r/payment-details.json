{
  "$schema": "https://ui.shadcn.com/schema/registry-item.json",
  "name": "payment-details",
  "type": "registry:block",
  "title": "Payment Details",
  "description": "A comprehensive payment details form component with card details, billing information, and country selection",
  "dependencies": [
    "lucide-react"
  ],
  "registryDependencies": [
    "button",
    "card",
    "input",
    "label",
    "utils"
  ],
  "files": [
    {
      "path": "src/registry/billingsdk/payment-details.tsx",
      "content": "\"use client\";\r\n\r\nimport { useState } from \"react\";\r\nimport { Calendar, Shield, Check, CreditCard } from \"lucide-react\";\r\nimport { cn } from \"@/lib/utils\";\r\nimport { useTheme } from \"@/contexts/theme-context\";\r\nimport { getThemeStyles } from \"@/lib/themes\";\r\nimport { Country, State, City, IState, ICity } from \"country-state-city\";\r\n/**\r\n * Detects the card type based on the card number\r\n * @param cardNumber - The card number to analyze\r\n * @returns The detected card type (visa, mastercard, amex, rupay, diners, or unknown)\r\n * @note This is a best-effort detection based on known BIN ranges\r\n */\r\nconst detectCardType = (\r\n  cardNumber: string,\r\n):\r\n  | \"visa\"\r\n  | \"mastercard\"\r\n  | \"amex\"\r\n  | \"rupay\"\r\n  | \"diners\"\r\n  | \"discover\"\r\n  | \"unknown\" => {\r\n  const number = cardNumber.replace(/\\s/g, \"\");\r\n\r\n  // Order matters: check more specific patterns first\r\n  if (/^4/.test(number)) return \"visa\";\r\n  if (/^3[47]/.test(number)) return \"amex\";\r\n  // Diners Club with expanded prefixes\r\n  if (/^3(?:0[0-5]|09|095|6|8)/.test(number)) return \"diners\";\r\n  // Mastercard with expanded range (51-55 and 2221-2720)\r\n  if (\r\n    /^5[1-5]/.test(number) ||\r\n    /^222[1-9]/.test(number) ||\r\n    /^22[3-9]\\d/.test(number) ||\r\n    /^2[3-6]\\d{2}/.test(number) ||\r\n    /^27[0-1]\\d/.test(number) ||\r\n    /^2720/.test(number)\r\n  )\r\n    return \"mastercard\";\r\n  // Discover with expanded prefixes\r\n  if (\r\n    /^6011/.test(number) ||\r\n    /^65/.test(number) ||\r\n    /^64[4-9]/.test(number) ||\r\n    /^622(?:12[6-9]|1[3-9]\\d|[2-8]\\d{2}|9[0-1]\\d|92[0-5])/.test(number)\r\n  )\r\n    return \"discover\";\r\n  // More specific RuPay BIN ranges (best effort)\r\n  if (\r\n    /^60/.test(number) ||\r\n    /^81/.test(number) ||\r\n    /^82/.test(number) ||\r\n    /^508/.test(number)\r\n  )\r\n    return \"rupay\";\r\n\r\n  return \"unknown\";\r\n};\r\n\r\n/**\r\n * Formats a card number by adding spaces every 4 digits\r\n * @param value - The raw card number input\r\n * @returns The formatted card number with spaces\r\n */\r\nconst formatCardNumber = (value: string): string => {\r\n  const number = value.replace(/\\s/g, \"\").replace(/[^0-9]/gi, \"\");\r\n  const matches = number.match(/\\d{4,16}/g);\r\n  const match = (matches && matches[0]) || \"\";\r\n  const parts = [];\r\n\r\n  for (let i = 0, len = match.length; i < len; i += 4) {\r\n    parts.push(match.substring(i, i + 4));\r\n  }\r\n\r\n  if (parts.length) {\r\n    return parts.join(\" \");\r\n  } else {\r\n    return number;\r\n  }\r\n};\r\n\r\n/**\r\n * Formats an expiry date in MM/YY format\r\n * @param value - The raw expiry date input\r\n * @returns The formatted expiry date (MM/YY)\r\n */\r\nconst formatExpiryDate = (value: string): string => {\r\n  const number = value.replace(/\\D/g, \"\");\r\n  if (number.length >= 2) {\r\n    return number.substring(0, 2) + \"/\" + number.substring(2, 4);\r\n  }\r\n  return number;\r\n};\r\n\r\n/**\r\n * Validates a card number using the Luhn algorithm\r\n * @param cardNumber - The card number to validate\r\n * @returns Boolean indicating if the card number is valid\r\n */\r\nconst validateLuhn = (cardNumber: string): boolean => {\r\n  const number = cardNumber.replace(/\\s/g, \"\");\r\n  if (!number || !/^\\d+$/.test(number)) return false;\r\n\r\n  let sum = 0;\r\n  let shouldDouble = false;\r\n\r\n  // Loop through values starting from the rightmost digit\r\n  for (let i = number.length - 1; i >= 0; i--) {\r\n    let digit = parseInt(number.charAt(i));\r\n\r\n    if (shouldDouble) {\r\n      digit *= 2;\r\n      if (digit > 9) digit -= 9;\r\n    }\r\n\r\n    sum += digit;\r\n    shouldDouble = !shouldDouble;\r\n  }\r\n\r\n  return sum % 10 === 0;\r\n};\r\n\r\n/**\r\n * Validates the payment form data\r\n * @param data - The form data to validate\r\n * @param validators - Optional validation configuration\r\n * @returns Object containing validation errors\r\n */\r\nconst validateForm = (\r\n  data: PaymentFormData,\r\n  validators?: ValidationConfig,\r\n): Partial<PaymentFormData> => {\r\n  const errors: Partial<PaymentFormData> = {};\r\n  const cardType = detectCardType(data.cardNumber || \"\");\r\n\r\n  if (!data.nameOnCard?.trim()) errors.nameOnCard = \"Name is required\";\r\n\r\n  // Card number validation with Luhn algorithm\r\n  const strippedCardNumber = data.cardNumber?.replace(/\\s/g, \"\") || \"\";\r\n  if (\r\n    !strippedCardNumber ||\r\n    strippedCardNumber.length < 13 ||\r\n    !validateLuhn(strippedCardNumber)\r\n  ) {\r\n    errors.cardNumber = \"Valid card number is required\";\r\n  }\r\n\r\n  // Expiry date validation\r\n  if (!data.validTill || !/^\\d{2}\\/\\d{2}$/.test(data.validTill)) {\r\n    errors.validTill = \"Valid expiry date is required (MM/YY)\";\r\n  } else {\r\n    const [month, year] = data.validTill.split(\"/\");\r\n    const expiryMonth = parseInt(month);\r\n    const expiryYear = 2000 + parseInt(year);\r\n\r\n    const currentDate = new Date();\r\n\r\n    if (expiryMonth < 1 || expiryMonth > 12) {\r\n      errors.validTill = \"Invalid expiry month\";\r\n    } else {\r\n      // Create date for last day of expiry month\r\n      const expiryDate = new Date(expiryYear, expiryMonth, 0); // Day 0 gives last day of previous month\r\n      expiryDate.setHours(23, 59, 59, 999); // Set to last moment of the day\r\n\r\n      if (expiryDate < currentDate) {\r\n        errors.validTill = \"Card has expired\";\r\n      }\r\n    }\r\n  }\r\n\r\n  // CVV validation based on card type\r\n  const requiredCvvLength = cardType === \"amex\" ? 4 : 3;\r\n  if (!data.cvv || data.cvv.length !== requiredCvvLength) {\r\n    errors.cvv = `Valid ${requiredCvvLength}-digit CVV is required`;\r\n  }\r\n\r\n  if (!data.firstName?.trim()) errors.firstName = \"First name is required\";\r\n  if (!data.middleLastName?.trim())\r\n    errors.middleLastName = \"Last name is required\";\r\n  if (!data.billingAddress?.trim())\r\n    errors.billingAddress = \"Billing address is required\";\r\n  // PIN code validation - configurable based on country\r\n  const pinCodePattern = validators?.pinCode || /^\\d{6}$/;\r\n  if (!data.pinCode || !pinCodePattern.test(data.pinCode)) {\r\n    errors.pinCode = validators?.pinCodeErrorMessage || \"Invalid postal code\";\r\n  }\r\n\r\n  // Contact number validation - configurable based on country\r\n  const contactNumberPattern = validators?.contactNumber || /^\\d{10}$/;\r\n  if (!data.contactNumber || !contactNumberPattern.test(data.contactNumber)) {\r\n    errors.contactNumber =\r\n      validators?.contactNumberErrorMessage || \"Invalid phone number\";\r\n  }\r\n\r\n  return errors;\r\n};\r\n\r\nconst CardLogo = ({ type }: { type: string }) => {\r\n  switch (type) {\r\n    case \"visa\":\r\n      return (\r\n        <div className=\"flex h-6 w-10 items-center justify-center rounded bg-blue-600 text-xs font-bold text-white\">\r\n          VISA\r\n        </div>\r\n      );\r\n    case \"mastercard\":\r\n      return (\r\n        <div className=\"flex items-center\">\r\n          <div className=\"h-5 w-5 rounded-full bg-red-500\"></div>\r\n          <div className=\"-ml-2 h-5 w-5 rounded-full bg-orange-400\"></div>\r\n        </div>\r\n      );\r\n    case \"amex\":\r\n      return (\r\n        <div className=\"flex h-6 w-10 items-center justify-center rounded bg-blue-500 text-xs font-bold text-white\">\r\n          AMEX\r\n        </div>\r\n      );\r\n    case \"rupay\":\r\n      return (\r\n        <div className=\"flex h-6 w-10 items-center justify-center rounded bg-green-600 text-xs font-bold text-white\">\r\n          RuPay\r\n        </div>\r\n      );\r\n    case \"discover\":\r\n      return (\r\n        <div className=\"flex h-6 w-10 items-center justify-center rounded bg-orange-600 text-xs font-bold text-white\">\r\n          DISC\r\n        </div>\r\n      );\r\n    default:\r\n      return <CreditCard className=\"text-muted-foreground h-5 w-5\" />;\r\n  }\r\n};\r\n\r\n/**\r\n * Payment form data interface\r\n */\r\nexport interface PaymentFormData {\r\n  /** Name as it appears on the card */\r\n  nameOnCard?: string;\r\n  /** Card number (will be formatted automatically) */\r\n  cardNumber?: string;\r\n  /** Expiry date in MM/YY format */\r\n  validTill?: string;\r\n  /** Card verification value (CVV) */\r\n  cvv?: string;\r\n  /** Customer's first name */\r\n  firstName?: string;\r\n  /** Customer's middle and last name */\r\n  middleLastName?: string;\r\n  /** Customer's country */\r\n  country?: string;\r\n  /** Customer's state */\r\n  state?: string;\r\n  /** Customer's city */\r\n  city?: string;\r\n  /** Customer's billing address */\r\n  billingAddress?: string;\r\n  /** Customer's PIN code */\r\n  pinCode?: string;\r\n  /** Customer's phone number */\r\n  contactNumber?: string;\r\n  /** General form error message */\r\n  general?: string;\r\n}\r\n\r\n/**\r\n * Validation configuration interface\r\n */\r\nexport interface ValidationConfig {\r\n  /** Custom PIN code validation regex */\r\n  pinCode?: RegExp;\r\n  /** Custom PIN code error message */\r\n  pinCodeErrorMessage?: string;\r\n  /** Custom contact number validation regex */\r\n  contactNumber?: RegExp;\r\n  /** Custom contact number error message */\r\n  contactNumberErrorMessage?: string;\r\n  /** Country code for phone validation */\r\n  countryCode?: string;\r\n}\r\n\r\n/**\r\n * Payment form component props\r\n */\r\nexport interface PaymentFormProps {\r\n  /** Additional CSS classes for styling */\r\n  className?: string;\r\n  /** Main title for the payment form */\r\n  title?: string;\r\n  /** Description text below the title */\r\n  description?: string;\r\n  /** Initial form data */\r\n  initialData?: Partial<PaymentFormData>;\r\n  /** Validation configuration */\r\n  validators?: ValidationConfig;\r\n  /** Callback when form is submitted */\r\n  onSubmit?: (data: PaymentFormData) => void | Promise<void>;\r\n  /** Callback when discard button is clicked */\r\n  onDiscard?: () => void;\r\n  /** Text for submit button */\r\n  submitButtonText?: string;\r\n  /** Text for discard button */\r\n  discardButtonText?: string;\r\n  /** External loading state */\r\n  isLoading?: boolean;\r\n  /** Show success confirmation modal */\r\n  showConfirmation?: boolean;\r\n  /** Title for confirmation modal */\r\n  confirmationTitle?: string;\r\n  /** Message for confirmation modal */\r\n  confirmationMessage?: string;\r\n  /** Callback when confirmation is closed */\r\n  onConfirmationClose?: () => void;\r\n}\r\n\r\n/**\r\n * PaymentDetails component - A comprehensive payment form with card details and billing information\r\n *\r\n * Features:\r\n * - Card type detection (Visa, Mastercard, Amex, RuPay, Diners)\r\n * - Real-time input formatting and validation\r\n * - Responsive design with mobile support\r\n * - Accessibility features (ARIA labels, keyboard navigation)\r\n * - Customizable confirmation modal\r\n * - Support for multiple themes\r\n * - Country, state, and city selection\r\n *\r\n * @param props - PaymentFormProps object\r\n * @returns JSX element containing the payment details form\r\n */\r\nexport function PaymentDetails({\r\n  className,\r\n  title = \"Payment Details\",\r\n  description = \"Enter your payment information to complete the transaction.\",\r\n  initialData = {},\r\n  validators,\r\n  onSubmit,\r\n  onDiscard,\r\n  submitButtonText = \"Save Changes\",\r\n  discardButtonText = \"Discard\",\r\n  isLoading = false,\r\n  showConfirmation = false,\r\n  confirmationTitle = \"Payment Details Saved!\",\r\n  confirmationMessage = \"Your payment information has been securely saved and updated.\",\r\n  onConfirmationClose,\r\n}: PaymentFormProps) {\r\n  const { currentTheme, previewDarkMode } = useTheme();\r\n  const themeStyles = getThemeStyles(currentTheme, previewDarkMode);\r\n  const [selectedCountryCode, setSelectedCountryCode] = useState(\"\");\r\n  const [selectedStateCode, setSelectedStateCode] = useState(\"\");\r\n  const [availableStates, setAvailableStates] = useState<IState[]>([]);\r\n  const [availableCities, setAvailableCities] = useState<ICity[]>([]);\r\n\r\n  const allCountries = Country.getAllCountries();\r\n\r\n  // Initialize with empty strings, allowing initialData to override if provided\r\n  const [formData, setFormData] = useState<PaymentFormData>({\r\n    nameOnCard: \"\",\r\n    cardNumber: \"\",\r\n    validTill: \"\",\r\n    cvv: \"\",\r\n    firstName: \"\",\r\n    middleLastName: \"\",\r\n    country: \"\",\r\n    state: \"\",\r\n    city: \"\",\r\n    billingAddress: \"\",\r\n    pinCode: \"\",\r\n    contactNumber: \"\",\r\n    ...initialData,\r\n  });\r\n\r\n  const [errors, setErrors] = useState<Partial<PaymentFormData>>({});\r\n  const [isSubmitting, setIsSubmitting] = useState(false);\r\n  const [cardType, setCardType] = useState(\r\n    detectCardType(formData.cardNumber || \"\"),\r\n  );\r\n\r\n  const handleInputChange = (field: keyof PaymentFormData, value: string) => {\r\n    let formattedValue = value;\r\n\r\n    const isField = <K extends keyof PaymentFormData>(\r\n      f: keyof PaymentFormData,\r\n      k: K,\r\n    ): f is K => f === k;\r\n\r\n    if (isField(field, \"cardNumber\")) {\r\n      formattedValue = formatCardNumber(value);\r\n      setCardType(detectCardType(formattedValue));\r\n    } else if (isField(field, \"cvv\")) {\r\n      const maxLength = cardType === \"amex\" ? 4 : 3;\r\n      formattedValue = value.slice(0, maxLength);\r\n    } else if (isField(field, \"validTill\")) {\r\n      formattedValue = formatExpiryDate(value);\r\n    } else if (isField(field, \"pinCode\")) {\r\n      formattedValue = value.replace(/\\D/g, \"\").substring(0, 6);\r\n    } else if (isField(field, \"contactNumber\")) {\r\n      formattedValue = value.replace(/\\D/g, \"\").substring(0, 10);\r\n    }\r\n\r\n    // Handle country change - load states and reset state/city\r\n    if (isField(field, \"country\")) {\r\n      const selectedCountry = allCountries.find((c) => c.name === value);\r\n      if (selectedCountry) {\r\n        setSelectedCountryCode(selectedCountry.isoCode);\r\n        const states = State.getStatesOfCountry(selectedCountry.isoCode);\r\n        setAvailableStates(states);\r\n        setAvailableCities([]);\r\n        setFormData((prev) => ({\r\n          ...prev,\r\n          country: value,\r\n          state: \"\",\r\n          city: \"\",\r\n        }));\r\n        setSelectedStateCode(\"\");\r\n      }\r\n      return;\r\n    }\r\n\r\n    // Handle state change - load cities and reset city\r\n    if (isField(field, \"state\")) {\r\n      const selectedState = availableStates.find((s) => s.name === value);\r\n      if (selectedState) {\r\n        setSelectedStateCode(selectedState.isoCode);\r\n        const cities = City.getCitiesOfState(\r\n          selectedCountryCode,\r\n          selectedState.isoCode,\r\n        );\r\n        setAvailableCities(cities);\r\n        setFormData((prev) => ({ ...prev, state: value, city: \"\" }));\r\n      }\r\n      return;\r\n    }\r\n\r\n    setFormData((prev) => ({ ...prev, [field]: formattedValue }));\r\n\r\n    if (errors[field]) {\r\n      setErrors((prev) => ({ ...prev, [field]: \"\" }));\r\n    }\r\n  };\r\n\r\n  const handleSubmit = async () => {\r\n    const formErrors = validateForm(formData, validators);\r\n\r\n    if (Object.keys(formErrors).length > 0) {\r\n      setErrors(formErrors);\r\n      return;\r\n    }\r\n\r\n    setIsSubmitting(true);\r\n\r\n    try {\r\n      await onSubmit?.(formData);\r\n    } catch (error) {\r\n      console.error(\"Error submitting form:\", error);\r\n      // Set user-facing error message\r\n      setErrors((prev) => ({\r\n        ...prev,\r\n        general: \"Payment submission failed. Please try again.\",\r\n      }));\r\n      // Could also send to monitoring service if integrated\r\n      // monitoringService.captureException(error)\r\n    } finally {\r\n      setIsSubmitting(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <div\r\n        className={cn(\r\n          \"relative w-full max-w-xl rounded-3xl p-6 shadow-sm\",\r\n          className,\r\n        )}\r\n        style={themeStyles}\r\n      >\r\n        <div className=\"mb-6\">\r\n          <h1 className=\"text-foreground mb-2 font-sans text-3xl font-bold\">\r\n            {title}\r\n          </h1>\r\n          <p className=\"text-muted-foreground font-sans\">{description}</p>\r\n        </div>\r\n        {/* Card Details Section */}\r\n        <div className=\"border-border bg-card/50 mb-6 rounded-2xl border p-6\">\r\n          <h2 className=\"text-foreground mb-5 font-sans text-2xl font-semibold\">\r\n            Card Details\r\n          </h2>\r\n\r\n          <div className=\"space-y-4\">\r\n            {/* Name on Card and Valid Till */}\r\n            <div className=\"grid grid-cols-1 gap-4 md:grid-cols-3\">\r\n              <div className=\"md:col-span-2\">\r\n                <label className=\"text-muted-foreground mb-2 block text-sm font-medium\">\r\n                  Name On Card <span className=\"text-destructive\">*</span>\r\n                </label>\r\n                <input\r\n                  type=\"text\"\r\n                  value={formData.nameOnCard || \"\"}\r\n                  onChange={(e) =>\r\n                    handleInputChange(\"nameOnCard\", e.target.value)\r\n                  }\r\n                  className={`bg-background text-foreground focus:ring-ring focus:border-ring hover:border-border w-full rounded-xl border px-4 py-3 font-sans font-medium transition-all duration-200 focus:ring-2 ${\r\n                    errors.nameOnCard\r\n                      ? \"border-destructive focus:ring-destructive/20\"\r\n                      : \"border-border\"\r\n                  }`}\r\n                />\r\n                {errors.nameOnCard && (\r\n                  <p className=\"text-destructive mt-1 text-sm\">\r\n                    {errors.nameOnCard}\r\n                  </p>\r\n                )}\r\n              </div>\r\n              <div>\r\n                <label className=\"text-muted-foreground mb-2 block text-sm font-medium\">\r\n                  Valid Till <span className=\"text-destructive\">*</span>\r\n                </label>\r\n                <div className=\"relative\">\r\n                  <Calendar className=\"text-muted-foreground absolute top-1/2 left-4 h-5 w-5 -translate-y-1/2 transform\" />\r\n                  <input\r\n                    type=\"text\"\r\n                    placeholder=\"MM/YY\"\r\n                    value={formData.validTill || \"\"}\r\n                    onChange={(e) =>\r\n                      handleInputChange(\"validTill\", e.target.value)\r\n                    }\r\n                    className={`bg-background text-foreground focus:ring-ring focus:border-ring hover:border-border w-full rounded-xl border py-3 pr-4 pl-12 font-sans font-medium transition-all duration-200 focus:ring-2 ${\r\n                      errors.validTill\r\n                        ? \"border-destructive focus:ring-destructive/20\"\r\n                        : \"border-border\"\r\n                    }`}\r\n                  />\r\n                </div>\r\n                {errors.validTill && (\r\n                  <p className=\"text-destructive mt-1 text-sm\">\r\n                    {errors.validTill}\r\n                  </p>\r\n                )}\r\n              </div>\r\n            </div>\r\n\r\n            {/* Card Number and CVV */}\r\n            <div className=\"grid grid-cols-1 gap-4 md:grid-cols-3\">\r\n              <div className=\"md:col-span-2\">\r\n                <label className=\"text-muted-foreground mb-2 block text-sm font-medium\">\r\n                  Card Number <span className=\"text-destructive\">*</span>\r\n                </label>\r\n                <div className=\"relative\">\r\n                  <div className=\"absolute top-1/2 left-4 flex -translate-y-1/2 transform items-center\">\r\n                    <CardLogo type={cardType} />\r\n                  </div>\r\n                  <input\r\n                    type=\"text\"\r\n                    placeholder=\"1234 5678 9012 3456\"\r\n                    value={formData.cardNumber || \"\"}\r\n                    onChange={(e) =>\r\n                      handleInputChange(\"cardNumber\", e.target.value)\r\n                    }\r\n                    className={`bg-background text-foreground focus:ring-ring focus:border-ring hover:border-border w-full rounded-xl border py-3 pr-4 pl-20 font-sans font-medium transition-all duration-200 focus:ring-2 ${\r\n                      errors.cardNumber\r\n                        ? \"border-destructive focus:ring-destructive/20\"\r\n                        : \"border-border\"\r\n                    }`}\r\n                  />\r\n                </div>\r\n                {errors.cardNumber && (\r\n                  <p className=\"text-destructive mt-1 text-sm\">\r\n                    {errors.cardNumber}\r\n                  </p>\r\n                )}\r\n              </div>\r\n              <div>\r\n                <label className=\"text-muted-foreground mb-2 block text-sm font-medium\">\r\n                  CVV <span className=\"text-destructive\">*</span>\r\n                </label>\r\n                <div className=\"relative\">\r\n                  <Shield className=\"text-muted-foreground absolute top-1/2 left-4 h-5 w-5 -translate-y-1/2 transform\" />\r\n                  <input\r\n                    type=\"password\"\r\n                    placeholder=\"123\"\r\n                    value={formData.cvv || \"\"}\r\n                    onChange={(e) => handleInputChange(\"cvv\", e.target.value)}\r\n                    className={`bg-background text-foreground focus:ring-ring focus:border-ring hover:border-border w-full rounded-xl border py-3 pr-4 pl-12 font-sans font-medium transition-all duration-200 focus:ring-2 ${\r\n                      errors.cvv\r\n                        ? \"border-destructive focus:ring-destructive/20\"\r\n                        : \"border-border\"\r\n                    }`}\r\n                  />\r\n                </div>\r\n                {errors.cvv && (\r\n                  <p className=\"text-destructive mt-1 text-sm\">{errors.cvv}</p>\r\n                )}\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Divider between sections */}\r\n        <div className=\"border-border my-6 border-t\"></div>\r\n\r\n        {/* Billing Details Section */}\r\n        <div className=\"border-border bg-card/50 mb-6 rounded-2xl border p-6\">\r\n          <h2 className=\"text-foreground mb-5 font-sans text-2xl font-semibold\">\r\n            Billing Details\r\n          </h2>\r\n\r\n          <div className=\"space-y-4\">\r\n            {/* First Name and Middle & Last Name */}\r\n            <div className=\"grid grid-cols-1 gap-4 md:grid-cols-2\">\r\n              <div>\r\n                <label className=\"text-muted-foreground mb-2 block text-sm font-medium\">\r\n                  First Name <span className=\"text-destructive\">*</span>\r\n                </label>\r\n                <input\r\n                  type=\"text\"\r\n                  value={formData.firstName || \"\"}\r\n                  onChange={(e) =>\r\n                    handleInputChange(\"firstName\", e.target.value)\r\n                  }\r\n                  className={`bg-background text-foreground focus:ring-ring focus:border-ring hover:border-border w-full rounded-xl border px-4 py-3 font-sans font-medium transition-all duration-200 focus:ring-2 ${\r\n                    errors.firstName\r\n                      ? \"border-destructive focus:ring-destructive/20\"\r\n                      : \"border-border\"\r\n                  }`}\r\n                />\r\n                {errors.firstName && (\r\n                  <p className=\"text-destructive mt-1 text-sm\">\r\n                    {errors.firstName}\r\n                  </p>\r\n                )}\r\n              </div>\r\n              <div>\r\n                <label className=\"text-muted-foreground mb-2 block text-sm font-medium\">\r\n                  Middle & Last Name <span className=\"text-destructive\">*</span>\r\n                </label>\r\n                <input\r\n                  type=\"text\"\r\n                  value={formData.middleLastName || \"\"}\r\n                  onChange={(e) =>\r\n                    handleInputChange(\"middleLastName\", e.target.value)\r\n                  }\r\n                  className={`bg-background text-foreground focus:ring-ring focus:border-ring hover:border-border w-full rounded-xl border px-4 py-3 font-sans font-medium transition-all duration-200 focus:ring-2 ${\r\n                    errors.middleLastName\r\n                      ? \"border-destructive focus:ring-destructive/20\"\r\n                      : \"border-border\"\r\n                  }`}\r\n                />\r\n                {errors.middleLastName && (\r\n                  <p className=\"text-destructive mt-1 text-sm\">\r\n                    {errors.middleLastName}\r\n                  </p>\r\n                )}\r\n              </div>\r\n            </div>\r\n\r\n            {/* Country, State and City */}\r\n            <div className=\"grid grid-cols-1 gap-4 md:grid-cols-3\">\r\n              <div>\r\n                <label className=\"text-muted-foreground mb-2 block text-sm font-medium\">\r\n                  Country\r\n                </label>\r\n                <select\r\n                  value={formData.country || \"\"}\r\n                  onChange={(e) => handleInputChange(\"country\", e.target.value)}\r\n                  className=\"border-border bg-background text-foreground focus:ring-ring focus:border-ring hover:border-border custom-select w-full appearance-none rounded-xl border px-4 py-3 font-sans font-medium transition-all duration-200 focus:ring-2\"\r\n                >\r\n                  <option value=\"\">Country</option>\r\n                  {allCountries.map((country) => (\r\n                    <option key={country.isoCode} value={country.name}>\r\n                      {country.name}\r\n                    </option>\r\n                  ))}\r\n                </select>\r\n              </div>\r\n              <div>\r\n                <label className=\"text-muted-foreground mb-2 block text-sm font-medium\">\r\n                  State\r\n                </label>\r\n                <select\r\n                  value={formData.state || \"\"}\r\n                  onChange={(e) => handleInputChange(\"state\", e.target.value)}\r\n                  disabled={\r\n                    !selectedCountryCode || availableStates.length === 0\r\n                  }\r\n                  className=\"border-border bg-background text-foreground focus:ring-ring focus:border-ring hover:border-border custom-select w-full appearance-none rounded-xl border px-4 py-3 font-sans font-medium transition-all duration-200 focus:ring-2 disabled:cursor-not-allowed disabled:opacity-50\"\r\n                >\r\n                  <option value=\"\">State</option>\r\n                  {availableStates.map((state) => (\r\n                    <option key={state.isoCode} value={state.name}>\r\n                      {state.name}\r\n                    </option>\r\n                  ))}\r\n                </select>\r\n              </div>\r\n              <div>\r\n                <label className=\"text-muted-foreground mb-2 block text-sm font-medium\">\r\n                  City\r\n                </label>\r\n                <select\r\n                  value={formData.city || \"\"}\r\n                  onChange={(e) => handleInputChange(\"city\", e.target.value)}\r\n                  disabled={!selectedStateCode || availableCities.length === 0}\r\n                  className=\"border-border bg-background text-foreground focus:ring-ring focus:border-ring hover:border-border custom-select w-full appearance-none rounded-xl border px-4 py-3 font-sans font-medium transition-all duration-200 focus:ring-2 disabled:cursor-not-allowed disabled:opacity-50\"\r\n                >\r\n                  <option value=\"\">City</option>\r\n                  {availableCities.map((city) => (\r\n                    <option key={city.name} value={city.name}>\r\n                      {city.name}\r\n                    </option>\r\n                  ))}\r\n                </select>\r\n              </div>\r\n            </div>\r\n\r\n            {/* Billing Address */}\r\n            <div>\r\n              <label className=\"text-muted-foreground mb-2 block text-sm font-medium\">\r\n                Billing Address <span className=\"text-destructive\">*</span>\r\n              </label>\r\n              <textarea\r\n                value={formData.billingAddress || \"\"}\r\n                onChange={(e) =>\r\n                  handleInputChange(\"billingAddress\", e.target.value)\r\n                }\r\n                rows={3}\r\n                className={`bg-background text-foreground focus:ring-ring focus:border-ring hover:border-border w-full resize-none rounded-xl border px-4 py-3 font-sans font-medium transition-all duration-200 focus:ring-2 ${\r\n                  errors.billingAddress\r\n                    ? \"border-destructive focus:ring-destructive/20\"\r\n                    : \"border-border\"\r\n                }`}\r\n              />\r\n              {errors.billingAddress && (\r\n                <p className=\"text-destructive mt-1 text-sm\">\r\n                  {errors.billingAddress}\r\n                </p>\r\n              )}\r\n            </div>\r\n\r\n            {/* Pin Code and Contact Number */}\r\n            <div className=\"grid grid-cols-1 gap-4 md:grid-cols-2\">\r\n              <div>\r\n                <label className=\"text-muted-foreground mb-2 block text-sm font-medium\">\r\n                  Pin Code <span className=\"text-destructive\">*</span>\r\n                </label>\r\n                <input\r\n                  type=\"text\"\r\n                  placeholder=\"123456\"\r\n                  value={formData.pinCode || \"\"}\r\n                  onChange={(e) => handleInputChange(\"pinCode\", e.target.value)}\r\n                  className={`bg-background text-foreground focus:ring-ring focus:border-ring hover:border-border w-full rounded-xl border px-4 py-3 font-sans font-medium transition-all duration-200 focus:ring-2 ${\r\n                    errors.pinCode\r\n                      ? \"border-destructive focus:ring-destructive/20\"\r\n                      : \"border-border\"\r\n                  }`}\r\n                />\r\n                {errors.pinCode && (\r\n                  <p className=\"text-destructive mt-1 text-sm\">\r\n                    {errors.pinCode}\r\n                  </p>\r\n                )}\r\n              </div>\r\n              <div>\r\n                <label className=\"text-muted-foreground mb-2 block text-sm font-medium\">\r\n                  Phone Number <span className=\"text-destructive\">*</span>\r\n                </label>\r\n                <input\r\n                  type=\"text\"\r\n                  placeholder=\"9876543210\"\r\n                  value={formData.contactNumber || \"\"}\r\n                  onChange={(e) =>\r\n                    handleInputChange(\"contactNumber\", e.target.value)\r\n                  }\r\n                  className={`bg-background text-foreground focus:ring-ring focus:border-ring hover:border-border w-full rounded-xl border px-4 py-3 font-sans font-medium transition-all duration-200 focus:ring-2 ${\r\n                    errors.contactNumber\r\n                      ? \"border-destructive focus:ring-destructive/20\"\r\n                      : \"border-border\"\r\n                  }`}\r\n                />\r\n                {errors.contactNumber && (\r\n                  <p className=\"text-destructive mt-1 text-sm\">\r\n                    {errors.contactNumber}\r\n                  </p>\r\n                )}\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Display general error message */}\r\n        {errors.general && (\r\n          <div className=\"bg-destructive/10 border-destructive text-destructive mb-6 rounded-xl border p-4\">\r\n            {errors.general}\r\n          </div>\r\n        )}\r\n\r\n        {/* Action Buttons */}\r\n        <div className=\"flex justify-end gap-4\">\r\n          <button\r\n            className=\"text-muted-foreground border-border bg-background hover:bg-muted hover:border-border/80 rounded-xl border px-6 py-3 font-sans font-medium transition-all duration-200\"\r\n            onClick={onDiscard}\r\n            disabled={isSubmitting || isLoading}\r\n          >\r\n            {discardButtonText}\r\n          </button>\r\n          <button\r\n            onClick={handleSubmit}\r\n            disabled={isSubmitting || isLoading}\r\n            className={`flex transform items-center gap-2 rounded-xl px-6 py-3 font-sans font-medium shadow-sm transition-all duration-300 hover:scale-105 hover:shadow-lg active:scale-95 ${\r\n              isSubmitting || isLoading\r\n                ? \"bg-primary text-primary-foreground cursor-not-allowed opacity-70\"\r\n                : \"bg-primary text-primary-foreground hover:bg-primary/90 hover:shadow-primary/25\"\r\n            }`}\r\n          >\r\n            {isSubmitting || isLoading ? (\r\n              <>\r\n                <div className=\"border-primary-foreground h-4 w-4 animate-spin rounded-full border-2 border-t-transparent\"></div>\r\n                Saving...\r\n              </>\r\n            ) : (\r\n              submitButtonText\r\n            )}\r\n          </button>\r\n        </div>\r\n      </div>\r\n\r\n      {showConfirmation && (\r\n        <div className=\"animate-in fade-in fixed inset-0 z-50 flex items-center justify-center bg-black/50 duration-300\">\r\n          <div className=\"bg-background border-border animate-in zoom-in-95 mx-4 max-w-md rounded-2xl border p-8 shadow-lg duration-300\">\r\n            <div className=\"text-center\">\r\n              <div className=\"mx-auto mb-4 flex h-16 w-16 items-center justify-center rounded-full bg-green-100 dark:bg-green-900/20\">\r\n                <Check className=\"h-8 w-8 text-green-600 dark:text-green-400\" />\r\n              </div>\r\n              <h3 className=\"text-foreground mb-2 font-sans text-xl font-semibold\">\r\n                {confirmationTitle}\r\n              </h3>\r\n              <p className=\"text-muted-foreground font-sans\">\r\n                {confirmationMessage}\r\n              </p>\r\n              <button\r\n                onClick={onConfirmationClose}\r\n                className=\"bg-primary text-primary-foreground hover:bg-primary/90 mt-4 transform rounded-xl px-6 py-2 font-medium transition-all duration-200 hover:scale-105 active:scale-95\"\r\n              >\r\n                Close\r\n              </button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n    </>\r\n  );\r\n}\r\n",
      "type": "registry:component",
      "target": "components/billingsdk/payment-details.tsx"
    },
    {
      "path": "src/registry/billingsdk/demo/payment-details-demo.tsx",
      "content": "\"use client\";\r\n\r\nimport { useState } from \"react\";\r\nimport {\r\n  PaymentDetails,\r\n  type PaymentFormData,\r\n} from \"@/components/billingsdk/payment-details\";\r\n\r\nexport function PaymentDetailsDemo() {\r\n  const [showConfirmation, setShowConfirmation] = useState(false);\r\n\r\n  const handleSubmit = async (_data: PaymentFormData) => {\r\n    // Simulate API call\r\n    await new Promise((resolve) => setTimeout(resolve, 1500));\r\n    setShowConfirmation(true);\r\n\r\n    // Auto-hide confirmation after 3 seconds\r\n    setTimeout(() => {\r\n      setShowConfirmation(false);\r\n    }, 3000);\r\n  };\r\n\r\n  const handleDiscard = () => {\r\n    console.log(\"Form discarded\");\r\n  };\r\n\r\n  return (\r\n    <div className=\"flex w-full justify-center\">\r\n      <PaymentDetails\r\n        title=\"Payment Details\"\r\n        description=\"Enter your payment information to complete the transaction.\"\r\n        onSubmit={handleSubmit}\r\n        onDiscard={handleDiscard}\r\n        showConfirmation={showConfirmation}\r\n        onConfirmationClose={() => setShowConfirmation(false)}\r\n      />\r\n    </div>\r\n  );\r\n}\r\n",
      "type": "registry:component",
      "target": "components/payment-details-demo.tsx"
    }
  ]
}