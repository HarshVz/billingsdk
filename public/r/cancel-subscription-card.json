{
  "$schema": "https://ui.shadcn.com/schema/registry-item.json",
  "name": "cancel-subscription-card",
  "type": "registry:block",
  "title": "Cancel Subscription Card",
  "description": "A cancel subscription card component",
  "dependencies": [
    "lucide-react"
  ],
  "registryDependencies": [
    "button",
    "badge",
    "card",
    "utils"
  ],
  "files": [
    {
      "path": "src/registry/billingsdk/cancel-subscription-card.tsx",
      "content": "\"use client\";\r\n\r\nimport { useState } from \"react\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { Badge } from \"@/components/ui/badge\";\r\nimport { Card, CardContent } from \"@/components/ui/card\";\r\nimport { type Plan } from \"@/lib/billingsdk-config\";\r\nimport { cn } from \"@/lib/utils\";\r\nimport { Circle } from \"lucide-react\";\r\n\r\nexport interface CancelSubscriptionCardProps {\r\n  title: string;\r\n  description: string;\r\n  plan: Plan;\r\n  leftPanelImageUrl?: string;\r\n  warningTitle?: string;\r\n  warningText?: string;\r\n  keepButtonText?: string;\r\n  continueButtonText?: string;\r\n  finalTitle?: string;\r\n  finalSubtitle?: string;\r\n  finalWarningText?: string;\r\n  goBackButtonText?: string;\r\n  confirmButtonText?: string;\r\n  onCancel: (planId: string) => Promise<void> | void;\r\n  onKeepSubscription?: (planId: string) => Promise<void> | void;\r\n  className?: string;\r\n}\r\n\r\nexport function CancelSubscriptionCard({\r\n  title,\r\n  description,\r\n  plan,\r\n  leftPanelImageUrl,\r\n  warningTitle,\r\n  warningText,\r\n  keepButtonText,\r\n  continueButtonText,\r\n  finalTitle,\r\n  finalSubtitle,\r\n  finalWarningText,\r\n  goBackButtonText,\r\n  confirmButtonText,\r\n  onCancel,\r\n  onKeepSubscription,\r\n  className,\r\n}: CancelSubscriptionCardProps) {\r\n  const [showConfirmation, setShowConfirmation] = useState(false);\r\n  const [isLoading, setIsLoading] = useState(false);\r\n  const [error, setError] = useState<string | null>(null);\r\n\r\n  const handleContinueCancellation = () => {\r\n    setShowConfirmation(true);\r\n    setError(null);\r\n  };\r\n\r\n  const handleConfirmCancellation = async () => {\r\n    try {\r\n      setIsLoading(true);\r\n      setError(null);\r\n      await onCancel(plan.id);\r\n    } catch (err) {\r\n      setError(\r\n        err instanceof Error ? err.message : \"Failed to cancel subscription\",\r\n      );\r\n    } finally {\r\n      setIsLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleKeepSubscription = async () => {\r\n    try {\r\n      setIsLoading(true);\r\n      setError(null);\r\n      if (onKeepSubscription) {\r\n        await onKeepSubscription(plan.id);\r\n      }\r\n    } catch (err) {\r\n      setError(\r\n        err instanceof Error ? err.message : \"Failed to keep subscription\",\r\n      );\r\n    } finally {\r\n      setIsLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleGoBack = () => {\r\n    setShowConfirmation(false);\r\n    setError(null);\r\n  };\r\n\r\n  return (\r\n    <Card\r\n      className={cn(\r\n        \"flex w-full flex-col overflow-hidden p-0 sm:max-w-[1000px] md:flex-row\",\r\n        leftPanelImageUrl ? \"\" : \"sm:max-w-[500px]\",\r\n        className,\r\n      )}\r\n    >\r\n      {leftPanelImageUrl && (\r\n        <div className=\"relative hidden min-h-[500px] w-full overflow-hidden md:block md:w-1/2\">\r\n          {/* eslint-disable-next-line @next/next/no-img-element */}\r\n          <img\r\n            src={leftPanelImageUrl}\r\n            alt=\"Cancel Subscription\"\r\n            className=\"absolute inset-0 h-full w-full object-cover\"\r\n          />\r\n          <div className=\"via-background/30 to-background/90 absolute inset-0 hidden bg-gradient-to-r from-transparent dark:block\"></div>\r\n          <div className=\"from-background/80 to-background/20 absolute inset-0 hidden bg-gradient-to-t via-transparent dark:block\"></div>\r\n        </div>\r\n      )}\r\n      <CardContent\r\n        className={cn(\r\n          \"flex flex-col gap-4 px-4 py-6\",\r\n          leftPanelImageUrl ? \"w-full md:w-1/2\" : \"w-full\",\r\n        )}\r\n      >\r\n        <div className=\"flex flex-col gap-2 text-center md:text-left\">\r\n          <h2 className=\"text-xl font-semibold md:text-2xl\">{title}</h2>\r\n          <p className=\"text-muted-foreground text-xs md:text-sm\">\r\n            {description}\r\n          </p>\r\n          {error && (\r\n            <div className=\"bg-destructive/10 border-destructive/20 rounded-md border p-3\">\r\n              <p className=\"text-destructive text-sm\">{error}</p>\r\n            </div>\r\n          )}\r\n        </div>\r\n\r\n        {/* Plan Details */}\r\n        {!showConfirmation && (\r\n          <div className=\"bg-muted/50 flex flex-col gap-4 rounded-lg p-4\">\r\n            <div className=\"flex items-center justify-between\">\r\n              <div className=\"flex flex-col gap-1\">\r\n                <span className=\"text-lg font-semibold\">{plan.title} Plan</span>\r\n                <span className=\"text-muted-foreground text-sm\">\r\n                  Current subscription\r\n                </span>\r\n              </div>\r\n              <Badge variant=\"secondary\">\r\n                {parseFloat(plan.monthlyPrice) >= 0\r\n                  ? `${plan.currency}${plan.monthlyPrice}/monthly`\r\n                  : `${plan.monthlyPrice}/monthly`}\r\n              </Badge>\r\n            </div>\r\n            <div className=\"flex flex-col gap-2\">\r\n              {plan.features.slice(0, 4).map((feature, index) => (\r\n                <div key={index} className=\"flex items-center gap-2\">\r\n                  <Circle className=\"fill-primary text-primary h-2 w-2\" />\r\n                  <span className=\"text-muted-foreground text-sm\">\r\n                    {feature.name}\r\n                  </span>\r\n                </div>\r\n              ))}\r\n            </div>\r\n          </div>\r\n        )}\r\n\r\n        {/* Warning Section */}\r\n        {!showConfirmation && (warningTitle || warningText) && (\r\n          <div className=\"bg-muted/30 border-border rounded-lg border p-4\">\r\n            {warningTitle && (\r\n              <h3 className=\"text-foreground mb-2 font-semibold\">\r\n                {warningTitle}\r\n              </h3>\r\n            )}\r\n            {warningText && (\r\n              <p className=\"text-muted-foreground text-sm\">{warningText}</p>\r\n            )}\r\n          </div>\r\n        )}\r\n        {/* Action Buttons */}\r\n        {!showConfirmation ? (\r\n          <div className=\"mt-auto flex flex-col gap-3 sm:flex-row\">\r\n            <Button\r\n              className=\"flex-1\"\r\n              onClick={handleKeepSubscription}\r\n              disabled={isLoading}\r\n            >\r\n              {isLoading\r\n                ? \"Processing...\"\r\n                : keepButtonText || \"Keep My Subscription\"}\r\n            </Button>\r\n            <Button\r\n              variant=\"destructive\"\r\n              className=\"flex-1\"\r\n              onClick={handleContinueCancellation}\r\n              disabled={isLoading}\r\n            >\r\n              {continueButtonText || \"Continue Cancellation\"}\r\n            </Button>\r\n          </div>\r\n        ) : (\r\n          <div className=\"mt-auto flex flex-col gap-4\">\r\n            <div className=\"bg-muted/50 rounded-lg p-4 text-center\">\r\n              <h3 className=\"text-foreground mb-2 font-semibold\">\r\n                {finalTitle || \"Final Confirmation\"}\r\n              </h3>\r\n              <p className=\"text-muted-foreground mb-2 text-sm\">\r\n                {finalSubtitle ||\r\n                  \"Are you sure you want to cancel your subscription?\"}\r\n              </p>\r\n              <p className=\"text-destructive text-sm\">\r\n                {finalWarningText ||\r\n                  \"This action cannot be undone and you'll lose access to all premium features.\"}\r\n              </p>\r\n            </div>\r\n            <div className=\"flex flex-col gap-3 sm:flex-row\">\r\n              <Button\r\n                variant=\"outline\"\r\n                className=\"flex-1\"\r\n                onClick={handleGoBack}\r\n                disabled={isLoading}\r\n              >\r\n                {goBackButtonText || \"Go Back\"}\r\n              </Button>\r\n              <Button\r\n                variant=\"destructive\"\r\n                className=\"flex-1\"\r\n                onClick={handleConfirmCancellation}\r\n                disabled={isLoading}\r\n              >\r\n                {isLoading\r\n                  ? \"Cancelling...\"\r\n                  : confirmButtonText || \"Yes, Cancel Subscription\"}\r\n              </Button>\r\n            </div>\r\n          </div>\r\n        )}\r\n      </CardContent>\r\n    </Card>\r\n  );\r\n}\r\n",
      "type": "registry:component",
      "target": "components/billingsdk/cancel-subscription-card.tsx"
    },
    {
      "path": "src/registry/billingsdk/demo/cancel-subscription-card-demo.tsx",
      "content": "\"use client\";\r\n\r\nimport { CancelSubscriptionCard } from \"@/components/billingsdk/cancel-subscription-card\";\r\nimport { plans } from \"@/lib/billingsdk-config\";\r\n\r\nexport function CancelSubscriptionCardDemo() {\r\n  return (\r\n    <div className=\"flex w-full flex-col\">\r\n      <CancelSubscriptionCard\r\n        title=\"We're sorry to see you go...\"\r\n        description={`Before you cancel, we hope you'll consider upgrading to a ${plans[1].title} plan again.`}\r\n        plan={plans[1]}\r\n        leftPanelImageUrl=\"https://framerusercontent.com/images/GWE8vop9hubsuh3uWWn0vyuxEg.webp\"\r\n        warningTitle=\"You will lose access to your account\"\r\n        warningText=\"If you cancel your subscription, you will lose access to your account and all your data will be deleted.\"\r\n        keepButtonText={`Keep My ${plans[1].title} Plan`}\r\n        continueButtonText=\"Continue with Cancellation\"\r\n        finalTitle=\"Final Step - Confirm Cancellation\"\r\n        finalSubtitle=\"This action will immediately cancel your subscription\"\r\n        finalWarningText=\"You'll lose access to all Pro features and your data will be permanently deleted after 30 days.\"\r\n        goBackButtonText=\"Wait, Go Back\"\r\n        confirmButtonText=\"Yes, Cancel My Subscription\"\r\n        onCancel={async (planId) => {\r\n          console.log(\"Cancelling subscription for plan:\", planId);\r\n          return new Promise((resolve) => {\r\n            setTimeout(() => {\r\n              resolve(void 0);\r\n            }, 1000);\r\n          });\r\n        }}\r\n        onKeepSubscription={async (planId) => {\r\n          console.log(\"Keeping subscription for plan:\", planId);\r\n        }}\r\n        className=\"max-w-4xl\"\r\n      />\r\n    </div>\r\n  );\r\n}\r\n",
      "type": "registry:component",
      "target": "components/cancel-subscription-card-demo.tsx"
    },
    {
      "path": "src/registry/lib/billingsdk-config.ts",
      "content": "export interface Plan {\r\n  id: string;\r\n  title: string;\r\n  description: string;\r\n  highlight?: boolean;\r\n  type?: \"monthly\" | \"yearly\";\r\n  currency?: string;\r\n  monthlyPrice: string;\r\n  yearlyPrice: string;\r\n  buttonText: string;\r\n  badge?: string;\r\n  features: {\r\n    name: string;\r\n    icon: string;\r\n    iconColor?: string;\r\n  }[];\r\n}\r\n\r\nexport interface CurrentPlan {\r\n  plan: Plan;\r\n  type: \"monthly\" | \"yearly\" | \"custom\";\r\n  price?: string;\r\n  nextBillingDate: string;\r\n  paymentMethod: string;\r\n  status: \"active\" | \"inactive\" | \"past_due\" | \"cancelled\";\r\n}\r\n\r\nexport const plans: Plan[] = [\r\n  {\r\n    id: \"starter\",\r\n    title: \"Starter\",\r\n    description: \"For developers testing out Liveblocks locally.\",\r\n    currency: \"$\",\r\n    monthlyPrice: \"0\",\r\n    yearlyPrice: \"0\",\r\n    buttonText: \"Start today for free\",\r\n    features: [\r\n      {\r\n        name: \"Presence\",\r\n        icon: \"check\",\r\n        iconColor: \"text-green-500\",\r\n      },\r\n      {\r\n        name: \"Comments\",\r\n        icon: \"check\",\r\n        iconColor: \"text-orange-500\",\r\n      },\r\n      {\r\n        name: \"Notifications\",\r\n        icon: \"check\",\r\n        iconColor: \"text-teal-500\",\r\n      },\r\n      {\r\n        name: \"Text Editor\",\r\n        icon: \"check\",\r\n        iconColor: \"text-blue-500\",\r\n      },\r\n      {\r\n        name: \"Sync Datastore\",\r\n        icon: \"check\",\r\n        iconColor: \"text-zinc-500\",\r\n      },\r\n    ],\r\n  },\r\n  {\r\n    id: \"pro\",\r\n    title: \"Pro\",\r\n    description: \"For companies adding collaboration in production.\",\r\n    currency: \"$\",\r\n    monthlyPrice: \"20\",\r\n    yearlyPrice: \"199\",\r\n    buttonText: \"Sign up\",\r\n    badge: \"Most popular\",\r\n    highlight: true,\r\n    features: [\r\n      {\r\n        name: \"Presence\",\r\n        icon: \"check\",\r\n        iconColor: \"text-green-500\",\r\n      },\r\n      {\r\n        name: \"Comments\",\r\n        icon: \"check\",\r\n        iconColor: \"text-orange-500\",\r\n      },\r\n      {\r\n        name: \"Notifications\",\r\n        icon: \"check\",\r\n        iconColor: \"text-teal-500\",\r\n      },\r\n      {\r\n        name: \"Text Editor\",\r\n        icon: \"check\",\r\n        iconColor: \"text-blue-500\",\r\n      },\r\n      {\r\n        name: \"Sync Datastore\",\r\n        icon: \"check\",\r\n        iconColor: \"text-zinc-500\",\r\n      },\r\n    ],\r\n  },\r\n  {\r\n    id: \"enterprise\",\r\n    title: \"Enterprise\",\r\n    description:\r\n      \"For organizations that need more support and compliance features.\",\r\n    currency: \"$\",\r\n    monthlyPrice: \"Custom\",\r\n    yearlyPrice: \"Custom\",\r\n    buttonText: \"Contact sales\",\r\n    features: [\r\n      {\r\n        name: \"Presence\",\r\n        icon: \"check\",\r\n        iconColor: \"text-green-500\",\r\n      },\r\n      {\r\n        name: \"Comments\",\r\n        icon: \"check\",\r\n        iconColor: \"text-orange-500\",\r\n      },\r\n      {\r\n        name: \"Notifications\",\r\n        icon: \"check\",\r\n        iconColor: \"text-teal-500\",\r\n      },\r\n      {\r\n        name: \"Text Editor\",\r\n        icon: \"check\",\r\n        iconColor: \"text-blue-500\",\r\n      },\r\n      {\r\n        name: \"Sync Datastore\",\r\n        icon: \"check\",\r\n        iconColor: \"text-zinc-500\",\r\n      },\r\n    ],\r\n  },\r\n];\r\n",
      "type": "registry:lib",
      "target": "lib/billingsdk-config.ts"
    }
  ]
}